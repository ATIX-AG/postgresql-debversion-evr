CREATE EXTENSION debversion_evr;
--equal versions
SELECT '1:2.3-bla-1'::debversion_evr = '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr != '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr <= '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr >= '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr < '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr > '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

-- different epoch
SELECT '1:2.3-bla-1'::debversion_evr = '2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr != '2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr <= '2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr >= '2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr < '2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr > '2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

-- different revision
SELECT '1:2.3-bla-1'::debversion_evr = '1:2.3-bla-2'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr != '1:2.3-bla-2'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr <= '1:2.3-bla-2'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr >= '1:2.3-bla-2'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr < '1:2.3-bla-2'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr > '1:2.3-bla-2'::debversion_evr;
 ?column? 
----------
 f
(1 row)

--different versions
SELECT '1:2.3-bla-1'::debversion_evr = '1:2.3-blaa-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr != '1:2.3-blaa-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr <= '1:2.3-blaa-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr >= '1:2.3-blaa-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr < '1:2.3-blaa-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-1'::debversion_evr > '1:2.3-blaa-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

--real world examples
SELECT '1.60-26+b1'::debversion_evr < '1.60+git20161116.90da8a0-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

--non-valid versions (but dpkg can handle these with warning message)
SELECT '1:bla-1'::debversion_evr < '1:2.3-bla-1'::debversion_evr;
WARNING:  version 1:bla-1 has bad syntax: version number does not start with digit
 ?column? 
----------
 f
(1 row)

SELECT '1:bla-1'::debversion_evr > '1:2.3-bla-1'::debversion_evr;
WARNING:  version 1:bla-1 has bad syntax: version number does not start with digit
 ?column? 
----------
 t
(1 row)

SELECT '1:2.3-bla-a'::debversion_evr < '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1:2.3-bla-a'::debversion_evr > '1:2.3-bla-1'::debversion_evr;
 ?column? 
----------
 t
(1 row)

--these throw errors in dpkg (dpkg cannot handle them)
--SELECT '1:2.3-bla-1'::debversion_evr < '1:2.3-bla-'::debversion_evr;
--SELECT '1:2.3-bla-1'::debversion_evr > '1:2.3-bla-'::debversion_evr;
--long numeric values in version
SELECT '1.0.20181217162649+dfsg-10'::debversion_evr != '1.0.20181217162649+dfsg-10'::debversion_evr;
 ?column? 
----------
 f
(1 row)

SELECT '1.0.20181217162649+dfsg-10'::debversion_evr = '1.0.20181217162649+dfsg-10'::debversion_evr;
 ?column? 
----------
 t
(1 row)

